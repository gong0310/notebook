{"remainingRequest":"C:\\Users\\26917\\Desktop\\mydemo\\notebook\\view\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\26917\\Desktop\\mydemo\\notebook\\view\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\26917\\Desktop\\mydemo\\notebook\\view\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\26917\\Desktop\\mydemo\\notebook\\view\\src\\views\\Add.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\26917\\Desktop\\mydemo\\notebook\\view\\src\\views\\Add.vue","mtime":1600498282440},{"path":"C:\\Users\\26917\\Desktop\\mydemo\\notebook\\view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\26917\\Desktop\\mydemo\\notebook\\view\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\26917\\Desktop\\mydemo\\notebook\\view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\26917\\Desktop\\mydemo\\notebook\\view\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiQzovVXNlcnMvMjY5MTcvRGVza3RvcC9teWRlbW8vbm90ZWJvb2svdmlldy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCB7IGFkZGJvb2ssIGVkaXRib29rLCB1cGRhdGVib29rLCBhZGRwYXNzd2FkIH0gZnJvbSAiLi4vYXBpIjsKaW1wb3J0IHsgdG9SZWZzLCByZWFjdGl2ZSwgb25Nb3VudGVkLCB3YXRjaCB9IGZyb20gInZ1ZSI7CmltcG9ydCB7IHVzZVJvdXRlciwgdXNlUm91dGUgfSBmcm9tICJ2dWUtcm91dGVyIjsKZXhwb3J0IGRlZmF1bHQgewogIHNldHVwOiBmdW5jdGlvbiBzZXR1cCgpIHsKICAgIHZhciByb3V0ZXIgPSB1c2VSb3V0ZXIoKTsKICAgIHZhciByb3V0ZSA9IHVzZVJvdXRlKCk7CiAgICB2YXIgc3RhdGUgPSByZWFjdGl2ZSh7CiAgICAgIGluZm86IHsKICAgICAgICB0aXRsZTogIiIsCiAgICAgICAgY29udGVudDogIiIsCiAgICAgICAgc3RhdHVzOiAxCiAgICAgIH0sCiAgICAgIGlzdG9hc3Q6IGZhbHNlLAogICAgICB0b2FzdDogIiIsCiAgICAgIGlzcGFzc3dhZHM6IGZhbHNlLAogICAgICBwYXNzd2FkczogIiIsCiAgICAgIGhlYWRlcjogIua3u+WKoOS+v+etviIKICAgIH0pOwogICAgd2F0Y2goZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gc3RhdGUuaW5mby5zdGF0dXM7CiAgICB9LCBmdW5jdGlvbiAobiwgbykgewogICAgICBpZiAobiA9PSAxKSB7CiAgICAgICAgc3RhdGUuaXNwYXNzd2FkcyA9IGZhbHNlOwogICAgICB9IGVsc2UgewogICAgICAgIHN0YXRlLmlzcGFzc3dhZHMgPSB0cnVlOwogICAgICB9CiAgICB9KTsKICAgIG9uTW91bnRlZChmdW5jdGlvbiAoKSB7CiAgICAgIGlmIChyb3V0ZS5xdWVyeS5faWQpIHsKICAgICAgICBzdGF0ZS5oZWFkZXIgPSAi57yW6L6R5L6/562+IjsKICAgICAgICBlZGl0Ym9vayh7CiAgICAgICAgICBfaWQ6IHJvdXRlLnF1ZXJ5Ll9pZAogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgc3RhdGUuaW5mbyA9IHJlcy5kYXRhOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHN0YXRlLmhlYWRlciA9ICLmt7vliqDkvr/nrb4iOwogICAgICB9CiAgICB9KTsKCiAgICB2YXIgZ29iYWNrID0gZnVuY3Rpb24gZ29iYWNrKCkgewogICAgICByb3V0ZXIuZ28oLTEpOwogICAgfTsKCiAgICB2YXIgc2VsZWN0ID0gZnVuY3Rpb24gc2VsZWN0KHN0YXR1cykgewogICAgICBzdGF0ZS5pbmZvLnN0YXR1cyA9IHN0YXR1czsKICAgIH07IC8v5raI5oGv5b6u5o+Q56S6CgoKICAgIHZhciB0aXBzID0gZnVuY3Rpb24gdGlwcyh0aXRsZSkgewogICAgICBjbGVhclRpbWVvdXQoc3RhdGUudGlwVGltZXIpOwogICAgICBzdGF0ZS50b2FzdCA9IHRpdGxlOwogICAgICBzdGF0ZS5pc3RvYXN0ID0gdHJ1ZTsKICAgICAgc3RhdGUudGlwVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICBzdGF0ZS5pc3RvYXN0ID0gZmFsc2U7CiAgICAgIH0sIDE1MDApOwogICAgfTsKCiAgICB2YXIgYWRkcGFzc3dhZHMgPSBmdW5jdGlvbiBhZGRwYXNzd2FkcygpIHsKICAgICAgYWRkcGFzc3dhZCh7CiAgICAgICAgcGFzc3dhZHM6IHN0YXRlLnBhc3N3YWRzLAogICAgICAgIHN0YXR1czogc3RhdGUuaW5mby5zdGF0dXMKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgfSk7CiAgICB9OwoKICAgIHZhciBzdWJtaXQgPSBmdW5jdGlvbiBzdWJtaXQoKSB7CiAgICAgIGFkZHBhc3N3YWRzKCk7CgogICAgICBpZiAoIXN0YXRlLmluZm8udGl0bGUgfHwgIXN0YXRlLmluZm8uY29udGVudCkgewogICAgICAgIHRpcHMoIuivt+i+k+WFpeWujOaVtOS/oeaBryIpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKCFyb3V0ZS5xdWVyeS5faWQpIHsKICAgICAgICBhZGRib29rKHN0YXRlLmluZm8pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT0gMjAwKSB7CiAgICAgICAgICAgIHJvdXRlci5wdXNoKCIvIik7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdXBkYXRlYm9vayhfb2JqZWN0U3ByZWFkKHsKICAgICAgICAgIF9pZDogcm91dGUucXVlcnkuX2lkCiAgICAgICAgfSwgc3RhdGUuaW5mbykpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT0gMjAwKSB7CiAgICAgICAgICAgIHJvdXRlci5wdXNoKCIvIik7CiAgICAgICAgICB9CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfTsKCiAgICByZXR1cm4gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB0b1JlZnMoc3RhdGUpKSwge30sIHsKICAgICAgZ29iYWNrOiBnb2JhY2ssCiAgICAgIHN1Ym1pdDogc3VibWl0LAogICAgICBzZWxlY3Q6IHNlbGVjdAogICAgfSk7CiAgfQp9Ow=="},{"version":3,"sources":["C:\\Users\\26917\\Desktop\\mydemo\\notebook\\view\\src\\views\\Add.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"add\">\r\n    <div class=\"header\">\r\n      <span class=\"back\" @click=\"goback\">\r\n        <i class=\"fa fa-arrow-left\" aria-hidden=\"true\"></i>\r\n      </span>\r\n      {{header}}\r\n      <span class=\"check\">\r\n        <i class=\"fa fa-check\" @click=\"submit\" aria-hidden=\"true\"></i>\r\n      </span>\r\n    </div>\r\n    <div class=\"content\">\r\n      <div class=\"title\">\r\n        <span>标题：</span>\r\n        <input v-model.trim=\"info.title\" type=\"text\" />\r\n      </div>\r\n      <div class=\"chag\">\r\n        分类：\r\n        <span :class=\"info.status==1?'act':''\" @click=\"select(1)\">公开</span>\r\n        <span :class=\"info.status==2?'act':''\" @click=\"select(2)\">悄悄话</span>\r\n      </div>\r\n      <div class=\"title\" v-show=\"ispasswads\">\r\n        <span>密码：</span>\r\n        <input v-model.trim=\"passwads\" type=\"text\" />\r\n      </div>\r\n      <div class=\"cont\">\r\n        <span>内容：</span>\r\n        <textarea v-model.trim=\"info.content\"></textarea>\r\n      </div>\r\n    </div>\r\n    <div class=\"toast\" v-show=\"istoast\">{{toast}}</div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { addbook, editbook, updatebook, addpasswad } from \"../api\";\r\nimport { toRefs, reactive, onMounted, watch } from \"vue\";\r\nimport { useRouter, useRoute } from \"vue-router\";\r\nexport default {\r\n  setup() {\r\n    const router = useRouter();\r\n    const route = useRoute();\r\n    const state = reactive({\r\n      info: {\r\n        title: \"\",\r\n        content: \"\",\r\n        status: 1,\r\n      },\r\n      istoast: false,\r\n      toast: \"\",\r\n      ispasswads: false,\r\n      passwads: \"\",\r\n      header: \"添加便签\",\r\n    });\r\n    watch(\r\n      () => state.info.status,\r\n      (n, o) => {\r\n        if (n == 1) {\r\n          state.ispasswads = false;\r\n        } else {\r\n          state.ispasswads = true;\r\n        }\r\n      }\r\n    );\r\n    onMounted(() => {\r\n      if (route.query._id) {\r\n        state.header = \"编辑便签\";\r\n        editbook({\r\n          _id: route.query._id,\r\n        }).then((res) => {\r\n          state.info = res.data;\r\n        });\r\n      } else {\r\n        state.header = \"添加便签\";\r\n      }\r\n    });\r\n    const goback = () => {\r\n      router.go(-1);\r\n    };\r\n    const select = (status) => {\r\n      state.info.status = status;\r\n    };\r\n    //消息微提示\r\n    const tips = (title) => {\r\n      clearTimeout(state.tipTimer);\r\n      state.toast = title;\r\n      state.istoast = true;\r\n      state.tipTimer = setTimeout(() => {\r\n        state.istoast = false;\r\n      }, 1500);\r\n    };\r\n    const addpasswads = () => {\r\n      addpasswad({ passwads: state.passwads,status:state.info.status})\r\n        .then((res) => {\r\n          console.log(res);\r\n        });\r\n    };\r\n    const submit = () => {\r\n      addpasswads();\r\n      if (!state.info.title || !state.info.content) {\r\n        tips(\"请输入完整信息\");\r\n        return;\r\n      }\r\n      if (!route.query._id) {\r\n        addbook(state.info).then((res) => {\r\n          if (res.status == 200) {\r\n            router.push(\"/\");\r\n          }\r\n        });\r\n      } else {\r\n        updatebook({\r\n          _id: route.query._id,\r\n          ...state.info,\r\n        })\r\n          .then((res) => {\r\n            if (res.status == 200) {\r\n              router.push(\"/\");\r\n            }\r\n          })\r\n          .catch((err) => {\r\n            console.log(err);\r\n          });\r\n      }\r\n    };\r\n    return {\r\n      ...toRefs(state),\r\n      goback,\r\n      submit,\r\n      select,\r\n    };\r\n  },\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.add {\r\n  .toast {\r\n    position: fixed;\r\n    left: 50%;\r\n    top: 50%;\r\n    transform: translate(-50%);\r\n    background-color: rgba(0, 0, 0, 0.5);\r\n    z-index: 100;\r\n    color: #fff;\r\n    font-size: 0.6rem;\r\n    padding: 0.533333rem;\r\n  }\r\n\r\n  .header {\r\n    height: 3rem;\r\n    line-height: 3rem;\r\n    background-color: #b0d6e1;\r\n    font-size: 0.8rem;\r\n    position: relative;\r\n    color: #fff;\r\n    .back {\r\n      position: absolute;\r\n      left: 0.533333rem;\r\n    }\r\n    .check {\r\n      position: absolute;\r\n      right: 0.533333rem;\r\n    }\r\n  }\r\n  .content {\r\n    background-image: url(\"../assets/img/bc2.jpg\");\r\n    background-position-x: 50%;\r\n    padding: 0.533333rem;\r\n    text-align: left;\r\n    font-size: 0.8rem;\r\n    min-height: 90vh;\r\n    .chag {\r\n      height: 2.133333rem;\r\n      line-height: 2.133333rem;\r\n      span {\r\n        padding: 0.133333rem 0.466667rem;\r\n        border-radius: 0.266667rem;\r\n        background-color: #fff;\r\n        margin: 0 0.133333rem;\r\n      }\r\n      .act {\r\n        color: #b0d6e1;\r\n      }\r\n    }\r\n    .title {\r\n      margin: 0.533333rem 0;\r\n      span {\r\n        width: 20%;\r\n      }\r\n      input {\r\n        border-bottom: 0.026667rem solid #fff;\r\n        width: 80%;\r\n        letter-spacing: 0.16rem;\r\n      }\r\n    }\r\n    .cont {\r\n      span {\r\n        width: 20%;\r\n      }\r\n      textarea {\r\n        vertical-align: top;\r\n        letter-spacing: 0.16rem;\r\n        width: 80%;\r\n        min-height: 50vh;\r\n        border: none;\r\n        outline: none;\r\n        background: transparent;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>"],"sourceRoot":""}]}